jQuery(document).ready(function(){if("undefined"!==typeof TableFilterSortTableList)for(var k=0,k=0;k<TableFilterSortTableList.length;k++)TableFilterSortTableList[k]=jQuery(TableFilterSortTableList[k]).tableFilterSort()});
(function(k){k.fn.tableFilterSort=function(k){var p=0,u=this,a={debug:!1,baseURL:"",favouritesURL:"/tfs/favourites/",filtersURL:"/tfs/filters/",filtersParentPageID:"",favouritesParentPageID:"",useBackAndForwardButtons:!1,holderNumber:0,myTableHolder:u,myFilterFormHolder:null,myTable:null,myTableHead:null,myTableBody:null,myRows:null,dataDictionary:[],currentFilter:{},currentSorter:{},showFromRow:0,visibleRowCount:50,totalRowCount:0,maximumNumberOfFilterOptions:30,intervalForFilterCheck:1E3,hasFixedTableHeader:!0,
hasKeywords:!0,hasFavourites:!1,hasFilterSaving:!1,millisecondsBetweenActions:10,validDataTypes:["number","string","date"],maxNumberOfValuesToCheck:500,favouritesStore:[],startRowFX1:null,startRowFX2:null,endRowFX1:null,endRowFX2:null,filterTitle:"Filter Table",noFilterSelectedText:"No filter selected",closeAndApplyFilterText:"Close and Apply Filter",currentFilterText:"Current Filter",greaterThanLabel:"&gt; ",lowerThanLabel:"&lt; ",keywordsCategoryTitle:"Keywords",favouritesCategoryTitle:"Favourites",
filtersTitle:"Filter",tableSelector:"table.tableFilterSortTable",rowSelector:"tr.tfsRow",filterItemSelector:"span[data-filter]",showMoreDetailsSelector:".more",moreDetailsSelector:".hidden",filterFormHolderSelector:".tableFilterSortFilterFormHolder",sortLinkSelector:"a.sortable",favouriteLinkSelector:"a.addFav",moreRowEntriesSelector:".tableFilterSortMoreEntries",matchRowCountSelector:".match-row-number",minRowSelector:".min-row-number",maxRowSelector:".max-row-number",totalRowCountSelector:".total-row-number",
visibleRowCountSelector:".total-showing-row-number",paginationSelector:".pagination",saveAndLoadSelector:".saveAndLoad",loadingClass:"loading",showClass:"show",hideClass:"hide",matchClass:"match",notMatchClass:"no-match",openedClass:"opened",filterIsOpenClass:"filterIsOpen",sectionFilterClassAppendix:"Filter",commonContentHolderClass:"tableFilterSortCommonContentHolder",currentSearchFilterClass:"tableFilterSortCurrentSearchHolder",openAndCloseFilterFormClass:"tableFilterSortOpenFilterForm",filterOptionsHolderClass:"tableFilterSortFilterFormOptions",
filterGroupClass:"filterColumn",groupLabelClass:"groupLabel",applyFilterClass:"applyFilter",filterInUseClass:"tableFilterSortFilterInUse",filterNotInUseClass:"tableFilterSortFilterNotInUse",noMatchMessageClass:"no-matches-message",sortAscClass:"sort-asc",sortDescClass:"sort-desc",directLinkClass:"dl",favouriteClass:"fav",init:function(b){a.holderNumber=b;a.myTableHolder=u;a.myFilterFormHolder=a.myTableHolder.find(a.filterFormHolderSelector).first();a.myTable=a.myTableHolder.find(a.tableSelector).first();
a.myTableHead=a.myTableHolder.find("table thead");a.myTableBody=a.myTable.find(" > tbody");a.favouritesParentPageID=a.myFilterFormHolder.attr("data-favourites-page-id");"string"===typeof a.favouritesParentPageID&&0<a.favouritesParentPageID.length&&(a.hasFavourites=!0);a.filtersParentPageID=a.myFilterFormHolder.attr("data-filter-page-id");"string"===typeof a.filtersParentPageID&&0<a.filtersParentPageID.length&&(a.hasFilterSaving=!0);a.baseURL=location.protocol+"//"+location.host+location.pathname;
a.resetObjects();1<a.myRows.length&&(a.myTableHolder.addClass(a.loadingClass),window.setTimeout(function(){a.debug&&(console.profileEnd(),console.profile("filterItemCollector"));a.filterItemCollector();a.debug&&(console.profileEnd(),console.profile("tableHideColsWhichAreAllTheSame"));a.tableHideColsWhichAreAllTheSame();a.debug&&(console.profileEnd(),console.profile("dataDictionaryCollector"));a.dataDictionaryCollector();a.debug&&(console.profileEnd(),console.profile("setupFilterFormListeners"));a.setupFilterFormListeners();
a.debug&&(console.profileEnd(),console.profile("setupSortListeners"));a.setupSortListeners();a.debug&&(console.profileEnd(),console.profile("paginationListeners"));a.paginationListeners();a.debug&&console.profile("setupMoreDetailsListener");a.setupMoreDetailsListener();a.debug&&console.profile("addURLChangeListener");a.addURLChangeListener();a.debug&&(console.profileEnd(),console.profile("retrieveServerDataListener"));a.retrieveServerDataListener();a.debug&&(console.profileEnd(),console.profile("favouriteLinkListener"));
a.favouriteLinkListener();a.debug&&(console.profileEnd(),console.profile("directFilterLinkListener"));a.directFilterLinkListener();a.debug&&(console.profileEnd(),console.profile("createFilterForm"));a.createFilterForm();a.debug&&console.profileEnd();a.myTableHolder.removeClass(a.loadingClass);a.debug&&console.profile("runCurrentSort");a.runCurrentSort();a.debug&&(console.profileEnd(),console.profile("retrieveCookieData"));a.retrieveCookieData();a.debug&&(console.profileEnd(),console.profile("fixTableHeader"));
a.fixTableHeader();a.debug&&console.profileEnd()},a.millisecondsBetweenActions))},resetObjects:function(){a.myRows=a.myTable.find(a.rowSelector)},filterItemCollector:function(){var b="",c="";a.myRows.each(function(d,e){jQuery(e).find(a.filterItemSelector).each(function(d,e){e=jQuery(e);b=e.text();c=e.attr("data-filter");0<b.trim().length&&(a.debug&&console.debug("adding "+b+" to "+c),"undefined"===typeof a.dataDictionary[c]&&(a.dataDictionary[c]={}),"undefined"===typeof a.dataDictionary[c].Options&&
(a.dataDictionary[c].Options=[]),-1===a.dataDictionary[c].Options.indexOf(b)&&a.dataDictionary[c].Options.push(b))})})},tableHideColsWhichAreAllTheSame:function(){var b=a.myTableHolder.find("."+a.commonContentHolderClass).attr("data-title"),c='<div class="'+a.commonContentHolderClass+'-inner">'+("undefined"!==typeof b?"<h3>"+b+"</h3>":"")+"<ul>",d=!1;Object.keys(a.dataDictionary).forEach(function(b,f){if(1===a.dataDictionary[b].Options.length){delete a.dataDictionary[b];a.debug&&console.debug("tableHideColsWhichAreAllTheSame: checking category: "+
b);d=!0;var m=!1;jQuery('span[data-filter="'+b+'"]').each(function(d,f){f=jQuery(f);m||""===f.html()||(c+="<li><strong>"+b+":</strong> <span>"+f.html()+"</span></li>",m=!0);var h=f.parent();f.remove();if(h.is("li"))h.hide();else if(h.is("td")&&0===h.children().length){if(0===d){var v=h.parent("tr").children("td").index(h);a.myTable.find("th").eq(v).remove()}h.remove()}})}});c+="</ul></div>";d?a.myTableHolder.find("."+a.commonContentHolderClass).html(c):a.myTableHolder.find("."+a.commonContentHolderClass).remove()},
dataDictionaryCollector:function(){Object.keys(a.dataDictionary).forEach(function(b,c){"undefined"===typeof a.dataDictionary[b].Options&&(a.dataDictionary[b].Options=[]);var d=a.myTable.find(a.sortLinkSelector+'[data-sort-field="'+b+'"]').first();"undefined"===typeof a.dataDictionary[b].CanFilter&&(d&&"true"==d.attr("data-sort-only")?a.dataDictionary[b].CanFilter=!1:a.dataDictionary[b].CanFilter=1<a.dataDictionary[b].Options.length);"undefined"===typeof a.dataDictionary[b].CanSort&&(a.dataDictionary[b].CanSort=
0<d.length);"undefined"===typeof a.dataDictionary[b].DataType&&a.dataDictionary[b].CanSort&&(d=d.attr("data-sort-type"),a.dataDictionary[b].DataType=d);if("undefined"===typeof a.dataDictionary[b].DataType){for(var d="number",e=!1,f=0,m=a.dataDictionary[b].Options.length<a.maxNumberOfValuesToCheck?a.dataDictionary[b].Options.length:500,f=0;f<m;f++)if(e=jQuery.isNumeric(a.dataDictionary[b].Options[f]),!1===e){d="string";break}a.dataDictionary[b].DataType=d}!1===jQuery.inArray(a.dataDictionary[b].DataType,
a.validDataTypes)&&console.debug("ERROR: invalid DataType for"+b+": "+a.dataDictionary[b].DataType);switch(a.dataDictionary[b].DataType){case "number":a.dataDictionary[b].Options.sort(function(a,b){a=parseFloat(a.replace(/[^0-9.]/g,""));b=parseFloat(b.replace(/[^0-9.]/g,""));return a-b});break;default:a.dataDictionary[b].Options.sort()}})},setupFilterFormListeners:function(){a.myFilterFormHolder.on("click","."+a.openAndCloseFilterFormClass,function(b){b.preventDefault();a.myFilterFormHolder.find("."+
a.filterOptionsHolderClass).toggleClass(a.openedClass).slideToggle("fast");a.myTableHolder.toggleClass(a.filterIsOpenClass);a.myTableHolder.hasClass(a.filterIsOpenClass)||a.applyFilter();return!1});a.myFilterFormHolder.on("change","input",function(b){a.applyFilter()});a.myFilterFormHolder.on("click",".clear",function(b){b.preventDefault();a.currentFilter={};a.createFilterForm();a.applyFilter();return!1})},setupSortListeners:function(){a.myTableHolder.on("click",a.sortLinkSelector,function(b){b.preventDefault();
var c=jQuery(this);a.showFromRow=0;a.startRowManipulation();a.myTableHead.find(a.sortLinkSelector).removeClass(a.sortAscClass).removeClass(a.sortDescClass);window.setTimeout(function(){a.currentSorter.category=c.attr("data-sort-field");a.currentSorter.direction=c.attr("data-sort-direction");a.currentSorter.sortType=c.attr("data-sort-type");"undefined"===typeof a.currentSorter.sortType&&(a.currentSorter.sortType=a.dataDictionary[a.currentSorter.category].DataType);var b=[];a.myRows.each(function(c,
e){var l=jQuery(e).find('[data-filter="'+a.currentSorter.category+'"]').text();"number"===a.currentSorter.sortType&&(l=l.replace(/[^\d.-]/g,""),l=parseFloat(l));b.push([l,c])});a.myTableBody.empty();b.sort(a.sortMultiDimensionalArray);var e=a.myTableHead.find(a.sortLinkSelector+'[data-sort-field="'+a.currentSorter.category+'"]');"desc"===a.currentSorter.direction?(b.reverse(),e.attr("data-sort-direction","asc").addClass(a.sortDescClass)):e.attr("data-sort-direction","desc").addClass(a.sortAscClass);
b.forEach(function(b){a.myTableBody.append(a.myRows[b[1]])});a.endRowManipulation()},a.millisecondsBetweenActions)})},paginationListeners:function(){a.myTableHolder.on("click",a.paginationSelector+" a",function(b){b.preventDefault();b=jQuery(this).attr("data-page");a.gotoPage(b);return!1})},setupMoreDetailsListener:function(){a.myTableHolder.on("click",a.showMoreDetailsSelector,function(b){b.preventDefault();b=jQuery(this);b.closest("tr").toggleClass(a.openedClass).find(a.moreDetailsSelector).each(function(b,
d){d=jQuery(d);d.slideToggle();d.toggleClass(a.openedClass)});b.toggleClass(a.openedClass)})},addURLChangeListener:function(){a.useBackAndForwardButtons&&window.addEventListener("popstate",function(b){a.findAndApplyGetVariables()})},directFilterLinkListener:function(){a.myTableBody.on("click","span[data-filter]."+a.directLinkClass,function(b){b.preventDefault();b=jQuery(this);var c=b.attr("data-filter");b=b.text().trim();var c=a.myFilterFormHolder.find("."+a.filterGroupClass+'[data-to-filter="'+c+
'"]'),d=c.attr("field-type"),e=c.find('input[value="'+b+'"].checkbox').first();e&&0<e.length?e.is(":checkbox")&&(!0===e.prop("checked")?e.prop("checked",!1).trigger("change"):e.prop("checked",!0).trigger("change")):"tag"===d&&a.makeCheckboxSection(c.find("input.awesomplete").first(),b);a.applyFilter();return!1})},favouriteLinkListener:function(){if(0<a.myTableBody.find(a.favouriteLinkSelector).length)a.myTableHolder.on("click",a.favouriteLinkSelector,function(b){b.preventDefault();b=jQuery(this).closest("tr");
b.toggleClass(a.favouriteClass);var c=b.attr("id");c&&"undefined"!==typeof c&&""!==c&&(b.hasClass(a.favouriteClass)?a.favouritesStore.push(c):(b=a.favouritesStore.indexOf(c),-1<b&&a.favouritesStore.splice(b,1)),Cookies.set("favouritesStore",a.favouritesStore,{path:a.baseURL,expires:180}));return!1})},retrieveServerDataListener:function(){a.myTableHolder.on("click",a.saveAndLoadSelector+" a",function(b){b.preventDefault();b=jQuery(this);var c=b.attr("href"),d=!1,e=!1,f=a.favouritesParentPageID,m={};
b.hasClass("save")&&(e=!0);b.hasClass("filters")&&(d=!0,f=a.filtersParentPageID);e&&(m=d?{f:a.currentFilter,s:a.currentSorter}:{f:a.favouritesStore});f=f.split("/").join("--");dataAsString=JSON.stringify(m);fullURL=c+encodeURI(f)+"/?data="+encodeURI(dataAsString);jQuery.modal('<iframe src="'+fullURL+'" height="450" width="830" style="border:0">',{closeHTML:"",containerCss:{backgroundColor:"#fff",borderColor:"#fff",height:450,padding:0,width:830},overlayClose:!0});b.modal();return!1})},createFilterForm:function(){if(0<
a.myFilterFormHolder.length){a.myFilterFormHolder.html("");var b="",c=a.myFilterFormHolder.attr("data-title");"undefined"===typeof c&&(c=a.filterTitle);0===a.myTableHolder.find("."+a.currentSearchFilterClass).length&&(b='<div class="'+a.currentSearchFilterClass+'"></div>');var d=1,e=[],f="<form>"+b+'<a href="#" class="'+a.openAndCloseFilterFormClass+' button closed">'+c+'</a><div style="display: none;" class="'+a.filterOptionsHolderClass+'">';a.hasKeywords&&(f+=a.makeSectionHeaderForForm("keyword",
a.keywordsCategoryTitle),f+=a.makeFieldForForm("keyword",a.keywordsCategoryTitle,d,0),f+=a.makeSectionFooterForForm());Object.keys(a.dataDictionary).forEach(function(b,c){if(a.dataDictionary[b].CanFilter){d++;var g=0,h=a.dataDictionary[b].Options.length;if(1<h&&h<=a.maximumNumberOfFilterOptions){f+=a.makeSectionHeaderForForm("checkbox",b);for(g=0;g<h;g++)f+=a.makeFieldForForm("checkbox",b,d,a.dataDictionary[b].Options[g]);f+=a.makeSectionFooterForForm()}else h>a.maximumNumberOfFilterOptions&&(g=a.dataDictionary[b].DataType,
"string"===a.dataDictionary[b].DataType&&(e.push(b),g="tag"),f+=a.makeSectionHeaderForForm(g,b),f+=a.makeFieldForForm(g,b,d,0),f+=a.makeSectionFooterForForm())}});a.hasFavourites&&(f+=a.makeSectionHeaderForForm("favourites",a.favouritesCategoryTitle),f+=a.makeFieldForForm("favourites",a.favouritesCategoryTitle,d,0),f+=a.makeSectionFooterForForm(),d++);b=a.myFilterFormHolder.attr("data-title-close-and-apply");"undefined"===typeof b&&(b=a.closeAndApplyFilterText);f+='<div class="'+a.applyFilterClass+
'"><a href="#" class="'+a.openAndCloseFilterFormClass+' button closed">'+b+"</a></div></div></form>";a.myFilterFormHolder.html(f);for(b=b=0;b<e.length;b++)category=e[b],c=a.myFilterFormHolder.find('input[name="'+category+'"].awesomplete').first(),c=jQuery(c).attr("id"),c=document.getElementById(c),new Awesomplete(c,{list:a.dataDictionary[category].Options,autoFirst:!0,replace:function(b){a.makeCheckboxSection(this.input,b.value);this.input.value="";b=this._list.indexOf(b.value);-1<b&&this._list.splice(b,
1);a.applyFilter()}})}},makeSectionHeaderForForm:function(b,c){var d=b+a.sectionFilterClassAppendix;c.replace(/\W/g,"");return'<div class="'+a.filterGroupClass+" "+d+'" field-type="'+b+'" data-to-filter="'+c.raw2attr()+'"><label class="'+a.groupLabelClass+'">'+a.replaceAll(c,"-"," ")+"</label><ul>"},makeFieldForForm:function(b,c,d,e){var f=c.replace(/\W/g,""),m=("TFS_"+f+"_"+e.toString()).replace(/[^a-zA-Z0-9]+/g,"_");if(0===a.myFilterFormHolder.find("input#"+m).length){var l='<li class="'+b+'Field">';
switch(b){case "favourites":var g="";"undefined"!==typeof a.currentFilter[c]&&(g=' checked="checked"');return l+'<input class="favourites" type="checkbox" name="'+c.raw2attr()+'" id="'+m+'" tabindex="'+d+'" '+g+' /><label for="'+m+'">\u2665 \u2665 \u2665</label></li>';case "keyword":case "tag":f=g="";if("keyword"===b)extraClass="keyword","undefined"!==typeof a.currentFilter[c]&&"undefined"!==typeof a.currentFilter[c][0]&&(g=a.currentFilter[c].valueToMatch,g=g.raw2attr());else if("tag"===b){if("undefined"!==
typeof a.currentFilter[c])for(b=0;b<a.currentFilter[c].length;b++)e=a.currentFilter[c].valueToMatch,e=a.makeFieldForForm("checkbox",c,d,e),5<e.length&&(e=e.replace("<input ",'<input checked="checked" ')),f+=e;extraClass="awesomplete"}return l+'<input class="text '+extraClass+'" type="text" name="'+c.raw2attr()+'" id="'+m+'" tabindex="'+d+'" value="'+g+'" />'+f+"</li>";case "checkbox":g="";if("undefined"!==typeof a.currentFilter[c])for(b=0;b<a.currentFilter[c].length;b++)e==a.currentFilter[c].valueToMatch&&
(g='checked="checked"');return l+'<input class="checkbox" type="checkbox" name="'+m+'" id="'+m+'" value="'+e.raw2attr()+'" '+g+' tabindex="'+d+'" /><label for="'+m+'">'+e+"</label></li>";case "number":case "date":return g={gt:"",lt:""},"undefined"!==typeof a.currentFilter[c]&&(g=a.currentFilter[c][0]),c=l+'<span class="gt"> <label for="'+m+'_gt">'+a.greaterThanLabel+'</label> <input data-dir="gt" data-label="'+a.greaterThanLabel.raw2attr()+'" class="number" step="any" type="number" name="'+f+'[]" id="'+
m+'" tabindex="'+d+'" value="'+g.gt.raw2attr()+'" /> </span><span class="lt"> <label for="'+m+'_lt">'+a.lowerThanLabel+'</label> <input data-dir="lt" data-label="'+a.lowerThanLabel.raw2attr()+'"  class="number" step="any" type="number" name="'+f+'[]" id="'+m+'_lt" tabindex="'+d+'" value="'+g.lt.raw2attr()+'" /> </span></li>',"date"===b&&(c=a.replaceAll(c,"number","datetime-local"),c=a.replaceAll(c,"step","86400")),c}}},makeSectionFooterForForm:function(){return"</ul></div>"},makeCheckboxSection:function(b,
c){b=jQuery(b);var d=b.attr("name");tabIndex=b.attr("tabindex");d=a.makeFieldForForm("checkbox",d,tabIndex,c);5<d.length&&(d=d.replace("<input ",'<input checked="checked" '),b.closest("ul").append(d))},runCurrentSort:function(){var b=a.myTableHolder.find("."+a.sortDescClass+", ."+a.sortAscClass).first();b&&0<b.length||(b=a.myTableHolder.find(a.sortLinkSelector+"[data-sort-default=true]").first());b&&0<b.length||(b=a.myTableHolder.find(a.sortLinkSelector).first());b&&0<b.length&&b.click()},applyFilter:function(){a.showFromRow=
0;a.workOutCurrentFilter();a.startRowManipulation();window.setTimeout(function(){a.debug&&(console.debug("=============="),console.debug(a.currentFilter));a.myRows.each(function(b,c){var d=jQuery(c);a.debug&&console.log("===");var e=!0,f=!0;Object.keys(a.currentFilter).forEach(function(b,c){if(f){for(var g=!1,h=!0,v=0;v<a.currentFilter[b].length;v++){var n=a.currentFilter[b][v];if(h){if(b===a.favouritesCategoryTitle){var q=d.attr("id");"undefined"!==typeof q&&0<q.length&&-1<a.favouritesStore.indexOf(q)&&
(g=!0)}else if(b===a.keywordsCategoryTitle){for(var r=n.valueToMatch,q=d.text().toLowerCase(),r=r.split(" "),k=!0,p=0;p<r.length;p++){var x=r[p].trim();if(-1===q.indexOf(x)){k=!1;break}}!0===k&&(g=!0)}else d.find('span[data-filter="'+b+'"]').each(function(d,c){c=jQuery(c);var e=c.text().toLowerCase().trim();switch(a.dataDictionary[b].DataType){case "date":break;case "number":if("undefined"!==typeof n.valueToMatch){var f=n.valueToMatch;e==f&&(g=!0)}else{var e=parseFloat(e.replace(/[^0-9.]/g,"")),h=
n.lt,l=!0;jQuery.isNumeric(h)&&0!==h&&h<e&&(l=!1);l&&(h=n.gt,jQuery.isNumeric(h)&&0!==h&&h>e&&(l=!1));l&&(g=!0);break}default:f=n.valueToMatch,e===f&&(g=!0)}if(g)return a.debug&&console.log("FILTER - MATCH: '"+f+"' in '"+b+"'"),!1;a.debug&&console.log("FILTER - NO MATCH: '"+f+"' in '"+b+"'")});g&&(h=!1)}}g||(f=e=!1)}});e?d.addClass(a.matchClass).removeClass(a.notMatchClass):d.addClass(a.notMatchClass).removeClass(a.matchClass)});a.endRowManipulation();a.debug&&(console.debug(a.currentFilter),console.debug("=============="))},
a.millisecondsBetweenActions)},gotoPage:function(b){a.showFromRow=b*a.visibleRowCount;a.startRowManipulation();a.endRowManipulation()},fixTableHeader:function(){var a=this,c=!1;jQuery(window).ready(function(){a.hasFixedTableHeader&&jQuery(window).bind("load resize scroll",function(d){a.myTableHolder.isOnScreen()||a.myTableHolder.hasClass(a.filterIsOpenClass)?(a.myTableHolder.addClass(a.filterInUseClass),a.myTableHolder.removeClass(a.filterNotInUseClass)):(a.myTableHolder.addClass(a.filterNotInUseClass),
a.myTableHolder.removeClass(a.filterInUseClass));"resize"===d.type&&(c=!1);var e=a.myTableBody.offset().top,f=jQuery(this).scrollTop();f>e?(a.myTableHolder.addClass("fixed-header"),a.myTableHead.css("top",a.myFilterFormHolder.outerHeight())):f<=e&&(a.myTableHolder.removeClass("fixed-header"),c||"load"===d.type||(c=!0,d=a.myTableHolder.width(),a.myFilterFormHolder.width(d),a.myTable.find("tbody tr:first td, tbody tr:first th").each(function(a,b){b=jQuery(b);var d=b.width();b.width(d);jQuery("thead tr").each(function(b,
c){jQuery(c).children().eq(a).width(d)})})))})})},startRowManipulation:function(){"function"===typeof a.startRowFX1&&a.startRowFX1(a);a.resetObjects();a.myTable.addClass(a.loadingClass).find(a.moreRowEntriesSelector).hide();a.myTable.hide();a.myRows.each(function(b,c){jQuery(c).addClass(a.hideClass).removeClass(a.showClass)});"function"===typeof a.startRowFX2&&a.startRowFX2(a)},endRowManipulation:function(){"function"===typeof a.endRowFX1&&a.endRowFX1(a);a.resetObjects();var b=a.showFromRow,c=0,d=
0,e=0,f=0===a.myTableBody.find("tr."+a.notMatchClass).length?!0:!1,m=!1;a.myRows.each(function(g,h){h=jQuery(h);c++;m=!1;if(f||h.hasClass(a.matchClass))m=!0,d++;m&&d>b&&e<a.visibleRowCount&&(e++,h.removeClass(a.hideClass).addClass(a.showClass))});0<d?jQuery("."+a.noMatchMessageClass).hide():jQuery("."+a.noMatchMessageClass).show();var l=b+e,g=Math.ceil(d/a.visibleRowCount),h=Math.floor(a.showFromRow/a.visibleRowCount),k="";if(1<g){for(var n=0,q=0,r=h-2,w=h+2,n=0;n<g;n++)h===n?(q=0,k+="<span>["+(n+
1)+"]</span>"):(test1=n>r&&n<w,test2=n>=g-3,test3=3>n,test1||test2||test3?(q=0,k+='<a href="#" data-page="'+n+'">'+(n+1)+"</a> "):3>q&&(q++,k+=" . ")),k+=" ";a.myTableHolder.find(a.moreRowEntriesSelector).show()}else a.myTableHolder.find(a.moreRowEntriesSelector).not(".alwaysShow").hide();b++;a.myTableHolder.find(a.matchRowCountSelector).text(d);a.myTableHolder.find(a.minRowSelector).text(b);a.myTableHolder.find(a.maxRowSelector).text(l);a.myTableHolder.find(a.totalRowCountSelector).text(c);a.myTableHolder.find(a.visibleRowCountSelector).text(e);
a.myTableHolder.find(a.paginationSelector).html(k);a.myTable.show();l=[];a.hasFavourites&&l.push(a.makeRetrieveButtons(0<a.favouritesStore.length,"favourites"));a.hasFilterSaving&&l.push(a.makeRetrieveButtons(0<a.currentFilter.length,"filters"));0<l.length&&(l="<ul>"+l.join("</li><li>")+"</ul>",a.myTableHolder.find(a.saveAndLoadSelector).html(l));a.myTable.removeClass(a.loadingClass);a.myTableHolder.hasClass(a.filterIsOpenClass)||window.setTimeout(function(){jQuery("html, body").animate({scrollTop:a.myTableHolder.position().top},
200)},100);a.useBackAndForwardButtons&&history.pushState(null,null,a.currentURL());a.resetObjects();"function"===typeof a.endRowFX2&&a.endRowFX2(a)},currentURL:function(){var b={};b.f=a.currentFilter;b.s=a.currentSorter;b="tfs="+encodeURI(JSON.stringify(b));return a.baseURL+"?"+b},makeRetrieveButtons:function(b,c){var d=[];switch(c){case "favourites":var e=a.favouritesURL,f=a.favouritesCategoryTitle;break;case "filters":e=a.filtersURL,f=a.filtersTitle}b&&d.push('<a href="'+e+'save/" class="save '+
c+'">Save '+f+"</a>");d.push('<a href="'+e+'index/" class="load '+c+'">Load '+f+"</a>");return buttonHTML="<li>"+d.join(" | ")+"</li>"},workOutCurrentFilter:function(){var b="",c,d="";a.currentFilter={};a.myFilterFormHolder.find(" ."+a.filterGroupClass).each(function(e,f){c=jQuery(f);d=c.attr("data-to-filter");var g=c.attr("field-type"),h=[];c.find("input").each(function(b,c){c=jQuery(c);var e=c.val(),f=e.toLowerCase().trim();switch(g){case "keyword":if(1<f.length)for("undefined"===typeof a.currentFilter[d]&&
(a.debug&&console.log("adding "+d),a.currentFilter[d]=[]),e=f.split(","),f=e.length,b=0;b<f;b++)innerValueToMatch=innerInputVal=e[b].trim(),1<innerValueToMatch.length&&(a.currentFilter[d].push({valueToMatch:innerValueToMatch,inputVal:innerInputVal}),h.push(innerValueToMatch),a.debug&&console.log("... adding '"+innerValueToMatch+"' to '"+d+"'"));break;case "tag":case "checkbox":c.is(":checked")&&("undefined"===typeof a.currentFilter[d]&&(a.debug&&console.log("adding "+d),a.currentFilter[d]=[]),h.push(f),
a.currentFilter[d].push({valueToMatch:f,inputVal:e}),a.debug&&console.log("... adding '"+d+"' to '"+f+"'"));break;case "favourites":c.is(":checked")&&("undefined"===typeof a.currentFilter[d]&&(a.debug&&console.log("adding "+d),a.currentFilter[d]=[]),a.currentFilter[d].push({valueToMatch:f,inputVal:e}),h.push(f),a.debug&&console.log("... adding '"+d+"' to '"+f+"'"));break;case "number":e=parseFloat(c.val());jQuery.isNumeric(e)&&0!==e&&("undefined"===typeof a.currentFilter[d]&&(a.debug&&console.log("adding "+
d),a.currentFilter[d]=[]),h.push(c.attr("data-label")+e+" "),"undefined"===typeof a.currentFilter[d][0]&&(a.currentFilter[d][0]={}),a.currentFilter[d][0][c.attr("data-dir")]=e);break;case "date":e=c.val().trim(),"0"!==e&&""!==e&&("undefined"===typeof a.currentFilter[d]&&(a.debug&&console.log("adding "+d),a.currentFilter[d]={}),h.push(c.attr("data-label")+e),a.currentFilter[d][0][c.attr("data-dir")]=e)}});if("undefined"!==typeof a.currentFilter[d]){var k=c.find("label."+a.groupLabelClass).text();b+=
"<li><strong>"+k+":</strong> <span>"+h.join("</span><span>")+"</span></li>"}});var b=0===b.length?a.noFilterSelectedText:'<div class="clear"><a href="#">\u2716</a></div>'+b,e=a.myTableHolder.find("."+a.currentSearchFilterClass),f=e.attr("data-title");"undefined"===typeof f&&(f=a.currentFilterText);b="<div><h3>"+f+"</h3><ul>"+b+"</ul></div>";e.html(b);a.myTableHolder.hasClass(a.filterIsOpenClass)?e.hide():e.show()},retrieveCookieData:function(){a.myTableBody.find("tr."+a.favouriteClass).each(function(b,
d){jQuery(d).removeClass(a.favouriteClass)});a.favouritesStore=Cookies.getJSON("favouritesStore");if("undefined"===typeof a.favouritesStore)a.favouritesStore=[];else for(var b in a.favouritesStore)a.favouritesStore.hasOwnProperty(b)&&a.myTableBody.find("#"+a.favouritesStore[b]).toggleClass(a.favouriteClass)},findAndApplyGetVariables:function(){var b={};location.search.substr(1).split("&").forEach(function(a){var c=a.split("=");a=c[0];c=c[1]&&decodeURIComponent(c[1]);(b[a]=b[a]||[]).push(c)});if("undefined"!==
typeof b.tfs){var c=JSON.parse(b.tfs);a.currentFilter=c.f;a.currentSorter=c.s}},replaceAll:function(a,c,d){a.split(c).join(d);return a},objectSize:function(a){var c=0,d;if("undefined"===typeof a)return 0;for(d in a)a.hasOwnProperty(d)&&c++;return c},objectSort:function(a){var c=[],d;for(d in a)a.hasOwnProperty(d)&&c.push([d,a[d]]);c.sort(function(a,b){a=a[1];b=b[1];return a<b?-1:a>b?1:0});a={};for(d=d=0;d<c.length;d++)"string"===typeof c[d][1]&&(a[c[d][0]]=c[d][1]);return a},makeID:function(){for(var a=
"",c=0;9>c;c++)a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".charAt(Math.floor(52*Math.random()));return a},sortMultiDimensionalArray:function(a,c){var d=a[0];"string"===typeof d&&(d=d.toLowerCase());var e=c[0];"string"===typeof e&&(e=e.toLowerCase());return d===e?0:d<e?-1:1}};TableFilterSort=jQuery.extend(a,k);this.each(function(b,c){a.init(p);p++});return{getVar:function(b){if(a.hasOwnProperty(b))return a[b]},setVar:function(b,c){a[b]=c;return this},gotoPage:function(b){a.gotoPage(b);
return this}}}})(jQuery);String.prototype.raw2attr=function(){return(""+this).replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r\n/g,"&#13;").replace(/[\r\n]/g,"&#13;")};
String.prototype.attr2raw=function(){var k;k=(""+this).replace(/\r\n/g,"\n").replace(/[\r\n]/,"\n").replace(/&#13;&#10;/g,"\n").replace(/&#1[03];/g,"\n").replace(/&#9;/g,"\t").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&apos;/g,"'");var t=/&[^;]*;?/.match(k);if(0<t.length&&"&amp;"!==t[0])throw"unsafe entity found in the attribute literal content";return k=k.replace(/&amp;/g,"&")};
jQuery.fn.isOnScreen=function(){var k,t;k=jQuery(window).scrollTop();t=k+jQuery(window).height();var p,u;p=this.offset().top;u=p+this.outerHeight();return p<=t&&u>=k};
